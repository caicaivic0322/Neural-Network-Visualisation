<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MNIST MLP – Visualisierung der Inferenz</title>
  <script type="module" crossorigin src="./assets/main.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/main.css">
</head>
<body>

    <!-- 2D Grid Overlay -->
    <div id="overlay2d" class="overlay-2d">
      <div class="container">
        <div id="gridContainer" class="grid-container"></div>
      </div>
    </div>

    <!-- Reset Button -->
    <div id="resetButtonContainer" class="reset-button-container">
        <button id="resetBtn">✖</button>
    </div>

    <!-- Prediction Chart Overlay -->
    <div id="predictionOverlay" class="prediction-overlay">
        <div class="prediction-container">
            <div id="predictionChart" class="prediction-chart">
        
            </div>
        </div>
    </div>

    <!-- Instructions Overlay -->
    <div id="instructionsOverlay" class="instructions-overlay">
        <div class="instructions-container">
            <div class="instructions-content">
                <p><strong>Zeichnen:</strong> Auf dem Raster klicken und ziehen (Rechtsklick zum Löschen)</p>
                <p><strong>3D-Steuerung:</strong> • Linke Taste + ziehen = drehen • Rechte Taste + ziehen = verschieben • Scrollrad = zoomen</p>
            </div>
        </div>
    </div>

    <!-- Mobile Instructions Overlay -->
    <div id="mobileInstructionsOverlay" class="mobile-instructions-overlay">
        <div class="mobile-instructions-content">
            <div class="mobile-instructions-title">Touch-Steuerung</div>
            <ul class="mobile-gesture-list">
                <li><strong>Zeichnen:</strong> Tippen und auf dem Raster ziehen</li>
                <li><strong>Drehen:</strong> Mit einem Finger ziehen</li>
                <li><strong>Verschieben:</strong> Mit zwei Fingern bewegen</li>
                <li><strong>Zoomen:</strong> Finger zusammenziehen oder spreizen</li>
            </ul>
        </div>
    </div>

    <!-- Info Button -->
    <div id="infoButton" class="info-button">
        <span>i</span>
    </div>

    <!-- MNIST Sample Images - Bottom Edge -->
    <div id="mnistImagesContainer" class="mnist-images-container"></div>

    <!-- Training Timeline Slider -->
    <div id="timelineOverlay" class="timeline-overlay hidden">
        <div class="timeline-container">
            <div class="timeline-header">
                <span class="timeline-title">Trainingsverlauf</span>
                <span id="timelineSummary" class="timeline-summary"></span>
            </div>
            <input
                id="timelineSlider"
                class="timeline-slider"
                type="range"
                min="0"
                value="0"
                step="1"
                disabled
                aria-label="Trainingsfortschritt"
            >
            <div class="timeline-meta">
                <span id="timelineLabel" class="timeline-label"></span>
                <span id="timelineMetrics" class="timeline-metrics timeline-metrics--empty"></span>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="info-modal">
        <div class="info-modal-content">
            <div class="info-modal-header">
                <h3>MNIST-Ziffernklassifikation – Visualisierung der Inferenz</h3>
                <button id="closeInfoModal" class="close-modal-btn">×</button>
            </div>
            <div class="info-modal-body">
                <p><strong>Interaktive Visualisierung eines neuronalen Netzes</strong></p>
                <p>Diese Anwendung zeigt ein kompaktes Multi-Layer-Perceptron (MLP), das auf MNIST trainiert wurde. Zeichnen Sie eine Ziffer und beobachten Sie, wie die Aktivierungen in Echtzeit durch alle vollvernetzten Schichten propagieren.</p>
                
                <h4>So funktioniert es:</h4>
                <ul>
                    <li><strong>Zeichnen:</strong> Im 2D-Raster (links oben) klicken und ziehen, um eine Ziffer zu skizzieren</li>
                    <li><strong>Beobachten:</strong> Verfolgen Sie, wie Ihre Skizze durch die Schichten des Netzes im 3D-Raum wandert</li>
                    <li><strong>Vorhersage:</strong> Prüfen Sie die Wahrscheinlichkeit für jede Ziffer (0–9) im Diagramm (rechts oben)</li>
                </ul>

                <h4>Netzarchitektur (Standardexport):</h4>
                <ul>
                    <li><strong>Eingabeschicht:</strong> 28×28 Pixelraster (Ihre Zeichnung)</li>
                    <li><strong>Dichtes Layer 1:</strong> 784 → 64 Neuronen mit ReLU</li>
                    <li><strong>Dichtes Layer 2:</strong> 64 → 32 Neuronen mit ReLU</li>
                    <li><strong>Ausgabeschicht:</strong> 32 → 10 Logits → Softmax-Wahrscheinlichkeiten</li>
                </ul>

                <h4>3D-Steuerung:</h4>
                <ul>
                    <li><strong>Drehen:</strong> Linke Maustaste gedrückt halten und ziehen</li>
                    <li><strong>Verschieben:</strong> Rechte Maustaste gedrückt halten und ziehen</li>
                    <li><strong>Zoomen:</strong> Mausrad benutzen</li>
                </ul>

                <h4>Farbkodierung:</h4>
                <ul>
                    <li><strong>Knoten:</strong> Die Farbe zeigt die Aktivierungsstärke (dunkle Blautöne für niedrige/negative Werte, kräftige Korallenfarben für starke positive Aktivierungen)</li>
                    <li><strong>Verbindungen:</strong> Warme Farben kennzeichnen starke positive Beiträge, kühle Töne negative Einflüsse, gedämpfte Linien nahezu Null.</li>
                </ul>

                <h4>Eigenes Modell trainieren:</h4>
                <ul>
                    <li><code>python training/mlp_train.py</code> starten, um das MLP zu trainieren (inkl. Apple-Metal-Beschleunigung, falls verfügbar).</li>
                    <li>Das Skript schreibt <code>exports/mlp_weights.json</code>, das der Visualisierer beim Laden einliest.</li>
                    <li>Anzahl versteckter Neuronen, Epochen oder Exportpfade über die in <code>training/mlp_train.py</code> dokumentierten CLI-Optionen verändern.</li>
                </ul>

                <h4>Echtzeitfunktionen:</h4>
                <ul>
                    <li><strong>Schichtaktivierungen:</strong> Instanzen von Kugeln zeigen Aktivierungen pro Neuron mit farbcodierter Stärke.</li>
                    <li><strong>Wichtige Verbindungen:</strong> Jedes Zielneuron hebt seine stärksten Eingangsgewichte für bessere Lesbarkeit hervor.</li>
                    <li><strong>Live-Wahrscheinlichkeiten:</strong> Das Balkendiagramm aktualisiert die Logits → Softmax-Werte in Echtzeit.</li>
                </ul>

                <p class="info-note">Das Netzwerk ist bewusst kompakt gehalten, um eine flüssige Echtzeitdarstellung zu gewährleisten. Sie können gern mit anderen Schichtgrößen neu trainieren – halten Sie die Architektur nur schlank, damit die 3D-Ansicht reaktionsschnell bleibt.</p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    



    <!-- 100% privacy-first analytics -->
    <script data-collect-dnt="true" async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
  
</body>
</html>
